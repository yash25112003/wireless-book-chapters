# name: Automate Python Script
# on:
#   schedule:
#     - cron: "*/5 * * * *"  # Runs every 5 minutes
#   workflow_dispatch:  # Manual trigger option

# jobs:
#   run-script:
#     runs-on: ubuntu-latest
#     timeout-minutes: 10  # Prevent hanging jobs
    
#     steps:
#       - name: ✅ Checkout Repository
#         uses: actions/checkout@v4  # Updated to v4
#         with:
#           fetch-depth: 0  # Required for proper git history in push step

#       - name: 🐍 Set Up Python
#         uses: actions/setup-python@v5
#         with:
#           python-version: '3.10'
#           cache: 'pip'  # Enable dependency caching

#       - name: 📦 Install Dependencies
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt  # Fail fast if missing
#           pip install aiohttp PyGithub crewai groq

#       - name: 🚀 Run Python Script
#         env:
#           GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
#           GITHUB_TOKEN: ${{ secrets.G_TOKEN }}  # Use default token
#         run: python main2.py

#       - name: ⬆️ Commit and Push Changes
#         if: success()  # Only on successful script run
#         run: |
#           git config --global user.name "github-actions"
#           git config --global user.email "github-actions@github.com"
#           git add .
#           git diff --cached --quiet || git commit -m "🔄 Auto-update: $(date +'%Y-%m-%d %H:%M:%S')"
#           git pull --rebase
#           git push
